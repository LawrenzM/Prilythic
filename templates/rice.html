<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static', filename='CSS/example.css')}}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Rice Page</title>
</head> 
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='JS/dash.js') }}"></script>
    <div class="container">
        <img src="{{ url_for('static', filename='IMAGES/OFFICIAL_PRILYTHIC_LOGO.png') }}" alt="Prilythic-logo" class="ds_logo">
        <br>
        <button onclick="window.location.href='{{ url_for('dashboard') }}'" class="DSbutton1">Dashboard</button>
        <button onclick="window.location.href='{{ url_for('categories') }}'" class="DSbutton2">Categories</button>
        <button onclick="window.location.href='{{ url_for('settings') }}'" class="DSbutton3">Settings</button>
        <button onclick="confirmLogout()" class="DSbutton4" data-logout-url="{{ url_for('logout') }}">Logout</button>
    </div>
    <div class="search">
        <input type="search_box" class="search" placeholder="Search..."> 
        <img src="{{ url_for('static', filename='IMAGES/Search_icon.png') }}" alt="search icon" class="search-icn">
        <h1 class="dstxt">Categories</h1>
    </div>
    <div class="wall">
        <h1 class="ds_wall_txt">Rice Price Chart</h1>
        <p class="ds_p_txt">See the predicted price of this product</p>
        
        {% set safe_name = info.name|replace(' ', '_')|replace('/', '-')|replace('.', '')|replace(',', '') %}
        <div class="scrollable-price-chart">
            <div class="row mb-4">
                <div class="col-md-8">
                    <div class="card p-3 mb-3">
                        <h5 class="mb-2">{{ info.name }}</h5>
                        <canvas id="priceChart-{{ safe_name }}" class="price-chart-canvas"></canvas>
                        <div class="btn-group mt-2">
                            <button class="btn btn-outline-primary" onclick="updateChart('{{ safe_name }}', 3)">3 Months</button>
                            <button class="btn btn-outline-primary" onclick="updateChart('{{ safe_name }}', 6)">6 Months</button>
                            <button class="btn btn-outline-primary" onclick="updateChart('{{ safe_name }}', 9)">9 Months</button>
                            <button class="btn btn-outline-primary" onclick="updateChart('{{ safe_name }}', 12)">Year</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 d-flex align-items-center">
                    <div class="card p-3 w-100">
                        <h4>Predicted Price (Next Month)</h4>
                        <p class="display-6 text-success">{{ info.predicted_price | round(2) }}<br>
                            <span class="fs-6 text-secondary">{{ info.next_month }}</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <script>
            window['historical_{{ safe_name }}'] = {{ info.historical|tojson|safe }};
            document.addEventListener("DOMContentLoaded", function() {
                drawChart('{{ safe_name }}', window['historical_{{ safe_name }}'], 3);
            });
        </script>
    </div>
    <div class="favorite_wall_price">
        <h1 class="wall_txt">Favorites</h1>
        <p class="fav_txt_price">Press the "Like" Button to add your product to Favorites for easy access next time</p>
        <button class="fav_button_price">Like</button>

    </div>

    <div class="profile">
        <h1 class="profile_name">Welcome to Prilythic, User!</h1>
            <h1 class="profile_icon"></h1>
        </div>
    </div>
</body>
</html>