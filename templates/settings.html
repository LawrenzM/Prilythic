<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static', filename='CSS/example.css')}}">
    <title>Settings Page</title>
    <!-- Dark mode support -->
    <script src="{{ url_for('static', filename='JS/dark_mode.js') }}"></script>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='JS/dash.js') }}"></script>
    <div class="container">
        <img src="{{url_for('static', filename='IMAGES/OFFICIAL_PRILYTHIC_LOGO.png')}}" alt="Prilythic-logo" class="ds_logo">
        <br>
        <button onclick="window.location.href='{{url_for('dashboard')}}'" class="DSbutton1">Dashboard</button>
        <button onclick="window.location.href='{{url_for('categories')}}'" class="DSbutton2">Categories</button>
        <button onclick="window.location.href='{{url_for('settings')}}'" class="DSbutton3">Settings</button>
        <button onclick="confirmLogout()" class="DSbutton4" data-logout-url="{{ url_for('logout') }}">Logout</button>
    </div>
    <div class="search">
        <input type="search_box" class="search" placeholder="Search...">
        <img src="{{url_for('static', filename='IMAGES/Search_icon.png')}}" alt="search icon" class="search-icn">
        <h1 class="dstxt">Account Settings</h1>
    </div>


    <div class="set_wall">
        <button class="set_but1" onclick="window.location.href='{{url_for('settings')}}'">Edit Profile</button>
        <button class="set_but2" onclick="window.location.href='{{url_for('preferences')}}'">Preferences</button>
        <button class="set_but3">Delete Account</button>
    </div>

    <div class="wall2">
        <div class="csv-upload-section" 
            style="position:relative; top:20px; left:0; width:1660px; height:700px; padding:20px; 
                    background-color:#504CAB; color:white; border-radius:20px;">
            <h3>Import CSV Data</h3>
            <form id="csvForm" method="POST" action="{{ url_for('import_csv') }}" enctype="multipart/form-data">
                <div id="drop-area" class="border p-4 mb-2 text-center" style="background-color:#645ED4; color:white; font-size: x-large">
                    <p>Drag & Drop your CSV file here</p>
                    <p>or</p>
                    <input type="file" name="csv_file" id="fileElem" accept=".csv" style="display:none;" required>
                    <button type="button" class="btn btn-light" onclick="document.getElementById('fileElem').click();">
                        Select CSV
                    </button>
                    <p id="file-name" class="text-truncate" style="color:white; font-size:xx-large;"></p>
                </div>
                <button type="submit" class="btn btn-success mt-2">Upload CSV</button>
            </form>
        </div>

        <h3 class="mt-5">Available CSV Files</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Filename</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for csv in csv_files %}
                <tr>
                    <td>{{ csv }}</td>
                    <td>
                        <a href="{{ url_for('load_csv', filename=csv) }}" class="btn btn-primary btn-sm">Load & Predict</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="profile">
        <h1 class="profile_name">Welcome to Prilythic, User!</h1>
            <h1 class="profile_icon"></h1>
        </div>
    </div>

</body>
</html>